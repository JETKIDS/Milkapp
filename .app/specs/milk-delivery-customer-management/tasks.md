# Implementation Plan

- [ ] 1. プロジェクト構造とコアインターフェースの設定
  - ディレクトリ構造の作成（models, services, repositories, API components）
  - TypeScriptインターフェースとデータモデルの定義
  - データベーススキーマファイルの作成
  - _Requirements: 1.1, 2.1, 3.1, 4.1_

- [ ] 2. データベースとコアモデルの実装
- [ ] 2.1 データベース接続とマイグレーション機能の実装
  - SQLiteデータベース接続設定
  - テーブル作成マイグレーションスクリプト
  - データベース初期化処理
  - _Requirements: 1.1, 2.1, 3.1, 4.1_

- [ ] 2.2 顧客モデルとバリデーション機能の実装
  - Customerモデルクラスの作成
  - 必須項目バリデーション機能
  - 顧客データのCRUD操作テスト
  - _Requirements: 1.1, 1.2, 1.3, 1.4_

- [ ] 2.3 メーカーモデルと関連チェック機能の実装
  - Manufacturerモデルクラスの作成
  - 商品との関連チェック機能
  - メーカー削除時の制約チェック
  - _Requirements: 2.1, 2.2, 2.3, 2.4_

- [ ] 2.4 商品モデルとメーカー関連付け機能の実装
  - Productモデルクラスの作成
  - メーカーとの必須関連付け機能
  - 注文との関連チェック機能
  - _Requirements: 3.1, 3.2, 3.3, 3.4, 3.5_

- [ ] 2.5 配達コースモデルと顧客関連機能の実装
  - DeliveryCourseモデルクラスの作成
  - 顧客との関連チェック機能
  - コース削除時の制約チェック
  - _Requirements: 4.1, 4.2, 4.3, 4.4, 4.5_

- [ ] 2.6 顧客契約商品管理機能の実装
  - CustomerProductContractモデルの作成
  - 契約商品の登録・更新・削除機能
  - 契約期間管理機能
  - _Requirements: 10.1, 10.2_

- [ ] 2.7 配達パターン管理機能の実装
  - DeliveryPatternモデルの作成
  - 曜日別配達数量設定機能
  - パターンの有効/無効切り替え
  - _Requirements: 10.2, 10.5_

- [ ] 2.8 顧客コース順番管理機能の実装
  - CustomerCoursePositionモデルの作成
  - コース内順番設定・更新機能
  - 順番の自動調整機能
  - _Requirements: 10.3, 10.4_

- [ ] 3. 注文管理とスケジュール機能の実装
- [ ] 3.1 注文モデルと在庫チェック機能の実装
  - Orderモデルクラスの作成
  - 顧客・商品との必須関連付け
  - 在庫数量チェックと警告機能
  - _Requirements: 6.1, 6.2, 6.3, 6.4_

- [ ] 3.2 配達スケジュール管理機能の実装
  - DeliveryScheduleモデルの作成
  - 曜日別スケジュール設定機能
  - 配達完了マーク機能
  - _Requirements: 5.1, 5.2, 5.3_

- [ ] 3.3 配達記録と履歴管理機能の実装
  - DeliveryRecordモデルの作成
  - 配達状況更新機能
  - 配達履歴の記録と表示
  - _Requirements: 5.3, 6.2_

- [ ] 4. バックエンドAPI実装
- [ ] 4.1 顧客管理APIエンドポイントの実装
  - GET/POST/PUT/DELETE /api/customers
  - バリデーションエラーハンドリング
  - 削除時の確認ダイアログ対応
  - _Requirements: 1.1, 1.2, 1.3, 1.4_

- [ ] 4.2 メーカー管理APIエンドポイントの実装
  - GET/POST/PUT/DELETE /api/manufacturers
  - 関連商品存在チェック機能
  - 削除制限エラーメッセージ
  - _Requirements: 2.1, 2.2, 2.3, 2.4_

- [ ] 4.3 商品管理APIエンドポイントの実装
  - GET/POST/PUT/DELETE /api/products
  - メーカー関連付け必須チェック
  - 関連注文存在チェック機能
  - _Requirements: 3.1, 3.2, 3.3, 3.4, 3.5_

- [ ] 4.4 配達コース管理APIエンドポイントの実装
  - GET/POST/PUT/DELETE /api/delivery-courses
  - 関連顧客存在チェック機能
  - 削除制限エラーハンドリング
  - _Requirements: 4.1, 4.2, 4.3, 4.4, 4.5_

- [ ] 4.5 注文管理APIエンドポイントの実装
  - GET/POST/PUT /api/orders
  - 注文履歴取得（顧客別・期間別）
  - 在庫チェックと警告レスポンス
  - _Requirements: 6.1, 6.2, 6.3, 6.4_

- [ ] 4.6 配達スケジュール管理APIの実装
  - GET/POST/PUT /api/schedules
  - 曜日別・コース別スケジュール取得
  - 配達完了マーク機能
  - _Requirements: 5.1, 5.2, 5.3_

- [ ] 4.7 顧客契約管理APIの実装
  - GET/POST/PUT/DELETE /api/customers/:id/contracts
  - GET/POST/PUT/DELETE /api/customers/:id/delivery-patterns
  - 契約商品・配達パターンのCRUD操作
  - _Requirements: 10.1, 10.2_

- [ ] 4.8 顧客詳細情報APIの実装
  - GET /api/customers/:id/detail
  - GET /api/customers/:id/delivery-schedule
  - GET /api/customers/:id/monthly-calendar/:year/:month
  - GET /api/customers/:id/monthly-billing/:year/:month
  - GET/PUT /api/customers/:id/course-position
  - _Requirements: 11.1, 11.2, 11.3, 11.4, 11.5_

- [ ] 5. 帳票機能の実装
- [ ] 5.1 配達リスト出力機能の実装
  - 期間・コース指定フィルタ機能
  - 配達予定データ抽出処理
  - PDF生成とダウンロード機能
  - データ存在チェックとエラーハンドリング
  - _Requirements: 7.1, 7.2, 7.3, 7.4, 7.5_

- [ ] 5.2 商品リスト出力機能の実装
  - 期間・コース指定フィルタ機能
  - 商品別数量集計処理
  - PDF生成とダウンロード機能
  - データ存在チェックとエラーハンドリング
  - _Requirements: 8.1, 8.2, 8.3, 8.4, 8.5_

- [ ] 5.3 請求書発行機能の実装
  - 顧客・期間指定機能
  - 配達実績データ抽出と集計
  - 請求書PDF生成機能
  - 請求書発行履歴記録機能
  - _Requirements: 9.1, 9.2, 9.3, 9.4, 9.5, 9.6_

- [ ] 5.4 請求書履歴管理機能の実装
  - InvoiceHistoryモデルの作成
  - 請求書履歴表示機能
  - 重複発行防止チェック
  - _Requirements: 9.4, 9.5_

- [ ] 6. フロントエンド基盤の実装
- [ ] 6.1 Reactプロジェクト設定とルーティング
  - React + TypeScript プロジェクト初期化
  - React Router設定
  - 基本レイアウトコンポーネント作成
  - _Requirements: 全般_

- [ ] 6.2 共通コンポーネントとユーティリティの実装
  - フォームバリデーション共通機能
  - エラーメッセージ表示コンポーネント
  - 確認ダイアログコンポーネント
  - API通信ユーティリティ
  - _Requirements: 1.4, 2.4, 3.5, 4.5_

- [ ] 7. 顧客管理画面の実装
- [ ] 7.1 顧客一覧画面の実装
  - 顧客リスト表示機能
  - 検索・フィルタ機能
  - 削除確認ダイアログ
  - _Requirements: 1.1, 1.3_

- [ ] 7.2 顧客登録・編集画面の実装
  - 顧客情報入力フォーム
  - バリデーション機能
  - 配達コース選択機能
  - _Requirements: 1.1, 1.2, 1.4, 4.4_

- [ ] 7.3 顧客契約管理画面の実装
  - 契約商品の登録・編集・削除機能
  - 配達パターン設定（曜日・数量）
  - 契約期間管理機能
  - _Requirements: 10.1, 10.2_

- [ ] 7.4 顧客詳細画面の実装
  - 顧客基本情報表示
  - 配達コース・順番表示
  - カレンダー形式での配達予定表示
  - 月次請求額表示
  - 日別配達詳細表示
  - _Requirements: 11.1, 11.2, 11.3, 11.4, 11.5_

- [ ] 8. メーカー・商品管理画面の実装
- [ ] 8.1 メーカー管理画面の実装
  - メーカー一覧・登録・編集機能
  - 関連商品存在時の削除制限表示
  - _Requirements: 2.1, 2.2, 2.3, 2.4_

- [ ] 8.2 商品管理画面の実装
  - 商品一覧・登録・編集機能
  - メーカー選択必須機能
  - 関連注文存在時の削除制限表示
  - _Requirements: 3.1, 3.2, 3.3, 3.4, 3.5_

- [ ] 9. 配達管理画面の実装
- [ ] 9.1 配達コース管理画面の実装
  - コース一覧・登録・編集機能
  - 関連顧客存在時の削除制限表示
  - _Requirements: 4.1, 4.2, 4.3, 4.4, 4.5_

- [ ] 9.2 配達スケジュール管理画面の実装
  - 曜日別・コース別スケジュール表示
  - 配達完了マーク機能
  - スケジュール設定機能
  - コース内順番変更機能
  - _Requirements: 5.1, 5.2, 5.3, 10.4_

- [ ] 10. 注文管理画面の実装
- [ ] 10.1 注文登録画面の実装
  - 顧客・商品選択機能
  - 在庫チェックと警告表示
  - 注文データ保存機能
  - _Requirements: 6.1, 6.3, 6.4_

- [ ] 10.2 注文履歴画面の実装
  - 顧客別・期間別注文履歴表示
  - 検索・フィルタ機能
  - _Requirements: 6.2_

- [ ] 11. 帳票出力画面の実装
- [ ] 11.1 配達リスト出力画面の実装
  - 期間・コース指定フォーム
  - PDF生成・ダウンロード機能
  - データ存在チェックとエラー表示
  - _Requirements: 7.1, 7.2, 7.3, 7.4, 7.5_

- [ ] 11.2 商品リスト出力画面の実装
  - 期間・コース指定フォーム
  - PDF生成・ダウンロード機能
  - データ存在チェックとエラー表示
  - _Requirements: 8.1, 8.2, 8.3, 8.4, 8.5_

- [ ] 11.3 請求書発行画面の実装
  - 顧客・期間指定フォーム
  - 請求書PDF生成・ダウンロード機能
  - 請求書履歴表示機能
  - データ存在チェックとエラー表示
  - _Requirements: 9.1, 9.2, 9.3, 9.4, 9.5, 9.6_

- [ ] 12. ダッシュボード画面の実装
- [ ] 12.1 ダッシュボード表示機能の実装
  - 今日の配達予定顧客数表示
  - 未完了配達リスト表示
  - 今月の売上概要表示
  - コース別配達状況表示
  - _Requirements: 12.1, 12.2, 12.3, 12.4_

- [ ] 13. テスト実装
- [ ] 13.1 バックエンドユニットテストの実装
  - モデルバリデーション機能テスト
  - API エンドポイントテスト
  - 関連データチェック機能テスト
  - _Requirements: 全般_

- [ ] 13.2 フロントエンドコンポーネントテストの実装
  - フォームバリデーションテスト
  - エラーハンドリングテスト
  - ユーザーインタラクションテスト
  - _Requirements: 全般_

- [ ] 13.3 統合テストの実装
  - API とフロントエンドの連携テスト
  - 帳票生成機能の統合テスト
  - データベース操作の統合テスト
  - _Requirements: 全般_

- [ ] 14. システム統合とデプロイ準備
- [ ] 14.1 フロントエンドとバックエンドの統合
  - API接続の最終確認
  - エラーハンドリングの統合テスト
  - パフォーマンス最適化
  - _Requirements: 全般_

- [ ] 14.2 本番環境設定とデプロイ準備
  - 環境変数設定
  - データベース本番設定
  - セキュリティ設定の確認
  - _Requirements: 全般_